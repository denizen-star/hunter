<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meaghan Fenton - Zocdoc</title>
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Quill.js Rich Text Editor -->
    <link href="/static/css/quill.snow.css" rel="stylesheet">
    <script src="/static/js/quill.min.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #fafafa;
            color: #1f2937;
            line-height: 1.6;
            margin: 0;
            padding: 0;
        }
        
        .header {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 20px 32px;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            color: #3b82f6;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 12px;
            transition: color 0.2s ease;
        }
        
        .back-link:hover {
            color: #2563eb;
        }
        
        .back-link::before {
            content: '‚Üê';
            font-size: 18px;
        }
        
        .header h1 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .header .subtitle {
            font-size: 14px;
            color: #6b7280;
        }
        
        /* Application Header Card */
        .app-header-card {
            background: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 24px;
            margin: 24px 32px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }
        
        .app-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            justify-content: center;
            padding-top: 16px;
            border-top: 1px solid #e5e7eb;
        }
        
        .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #6b7280;
        }
        
        .meta-item strong {
            color: #374151;
        }
        
        .status-pill {
            font-size: 12px;
            font-weight: 500;
            padding: 6px 12px;
            border-radius: 12px;
            display: inline-block;
        }
        
        .tag-green {
            background: #d1fae5;
            color: #065f46;
        }
        
        .tag-blue {
            background: #dbeafe;
            color: #1e40af;
        }
        
        .tag-gray {
            background: #f3f4f6;
            color: #4b5563;
        }
        
        .tabs {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 0;
            display: flex;
            gap: 0;
            margin: 0 32px;
        }
        
        .tab {
            padding: 16px 24px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            font-weight: 400;
            color: #6b7280;
            transition: all 0.15s ease;
            position: relative;
        }
        
        .tab:hover {
            color: #374151;
            background: #f9fafb;
        }
        
        .tab.active {
            color: #1f2937;
            border-bottom-color: #3b82f6;
            font-weight: 500;
        }
        
        .content {
            margin: 0 32px;
            padding: 0;
            padding-top: 0;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .section {
            background: white;
            border-radius: 0;
            padding: 0;
            margin-bottom: 24px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.06);
            border: 1px solid #e5e7eb;
            border-top: none;
            overflow: hidden;
            width: 100%;
        }
        
        .section.collapsed .section-content {
            display: none;
        }
        
        .section-header {
            background: #f9fafb;
            border-bottom: 1px solid #e5e7eb;
            padding: 16px 24px;
            margin: 0;
        }

        .section-header.clickable {
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
        }

        .section-toggle-indicator {
            font-size: 18px;
            color: #9ca3af;
            transition: transform 0.2s ease, color 0.2s ease;
        }

        .section:not(.collapsed) .section-toggle-indicator {
            transform: rotate(90deg);
            color: #4b5563;
        }
        
        .section h2 {
            font-size: 18px;
            font-weight: 500;
            margin: 0;
            color: #1f2937;
            padding: 0;
            border-bottom: none;
        }
        
        .section-content {
            padding: 28px;
        }
        
        .section-content h3 {
            font-size: 16px;
            font-weight: 600;
            margin: 20px 0 12px 0;
            color: #374151;
        }
        
        .section-content h3:first-child {
            margin-top: 0;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }
        
        .info-card {
            background: linear-gradient(135deg, #f9fafb 0%, #ffffff 100%);
            border: 1px solid #e5e7eb;
            border-radius: 10px;
            padding: 20px;
        }
        
        .info-card-label {
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            color: #6b7280;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }
        
        .info-card-value {
            font-size: 16px;
            font-weight: 600;
            color: #1f2937;
        }
        
        .analysis-section {
            background: #f9fafb;
            border-left: 4px solid #3b82f6;
            border-radius: 8px;
            padding: 20px;
            margin: 16px 0;
        }
        
        .analysis-section h4 {
            font-size: 14px;
            font-weight: 700;
            color: #1e40af;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .analysis-text {
            font-size: 14px;
            color: #374151;
            line-height: 1.7;
            white-space: pre-wrap;
        }
        
        .message-box {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
            position: relative;
        }
        
        .message-box h3 {
            margin-top: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
        }
        
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px 14px;
            font-size: 14px;
            font-family: inherit;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            background: white;
            color: #1f2937;
            transition: all 0.15s ease;
        }
        
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .btn {
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: all 0.15s ease;
            font-family: inherit;
        }
        
        .btn-primary {
            background: #3b82f6;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2563eb;
        }
        
        .btn-primary:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }
        
        .timeline {
            margin-top: 32px;
        }
        
        .timeline-item {
            padding: 20px;
            border-left: 3px solid #e5e7eb;
            margin-bottom: 20px;
            background: #f9fafb;
            border-radius: 0 8px 8px 0;
        }
        
        .timeline-item.latest {
            border-left-color: #3b82f6;
            background: #f0f9ff;
        }
        
        .timeline-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .timeline-status {
            display: inline-block;
            padding: 6px 12px;
            background: #3b82f6;
            color: white;
            border-radius: 6px;
            font-weight: 600;
            font-size: 13px;
        }
        
        .timeline-date {
            font-size: 13px;
            color: #6b7280;
            font-weight: 500;
        }
        
        .timeline-notes-label {
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .timeline-notes {
            color: #374151;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .alert {
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }
        
        .alert.success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #10b981;
        }
        
        .alert.error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #ef4444;
        }
        
        .alert.show {
            display: block;
        }
        
        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }
        
        .btn-secondary {
            background: white;
            color: #374151;
            border: 1px solid #d1d5db;
        }
        
        .btn-secondary:hover {
            background: #f9fafb;
        }
        
        .copy-btn {
            padding: 6px 12px;
            font-size: 12px;
            font-weight: 600;
            border-radius: 6px;
            border: 1px solid #d1d5db;
            background: white;
            color: #374151;
            cursor: pointer;
            transition: all 0.15s ease;
        }
        
        .copy-btn:hover {
            background: #f3f4f6;
        }
        
        .char-count {
            font-size: 12px;
            color: #6b7280;
            margin-top: 8px;
        }
        
        .template-btn {
            padding: 6px 12px;
            font-size: 12px;
            font-weight: 600;
            border-radius: 6px;
            border: 1px solid #d1d5db;
            background: white;
            color: #374151;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .template-btn:hover {
            background: #f3f4f6;
            border-color: #3b82f6;
            color: #3b82f6;
        }
        
        /* Quill Editor Styles */
        .ql-editor {
            min-height: 150px;
            font-size: 14px;
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
        }
        
        .ql-toolbar.ql-snow {
            border: 1px solid #d1d5db;
            border-radius: 8px 8px 0 0;
            background: #f9fafb;
        }
        
        .ql-container.ql-snow {
            border: 1px solid #d1d5db;
            border-top: none;
            border-radius: 0 0 8px 8px;
        }
        
        pre {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 16px;
            overflow-x: auto;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <!-- Main Content -->
    <div class="header">
        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
            <div>
                <h1>Meaghan Fenton</h1>
                <div class="subtitle">Zocdoc ‚Ä¢ Director of Recruiting</div>
            </div>
            <div style="display: flex; gap: 12px;">
                    <a href="https://calendar.google.com/calendar/render?action=TEMPLATE&text=Follow+up%3A+Meaghan+Fenton&dates=20251223%2F20251223&details=Follow-up+for+LinkedIn+connection+with+Meaghan+Fenton%0A%0ACompany%3A+Zocdoc%0ATitle%3A+Director+of+Recruiting%0AStatus%3A+Ready+to+Contact%0A%0ALinkedIn%3A+https%3A%2F%2Fwww.linkedin.com%2Fin%2Ffentonmeaghan%2F%0AEmail%3A+leacock.kervin%40gmail.com%0A%0ASuggested+Actions%3A%0A-+Check+if+they+accepted+your+connection+request%0A-+Send+meeting+invitation+if+they+accepted%0A-+Review+their+recent+LinkedIn+activity%0A-+Send+polite+follow-up+if+no+response%0A%0AView+Profile%3A+http%3A%2F%2Flocalhost%3A51003%2Fnetworking%2FMeaghan-Fenton-Zocdoc%2FMeaghan-Fenton-summary.html%0A&location=Zocdoc&sf=true&output=xml" target="_blank" rel="noopener noreferrer" class="btn btn-secondary">
                        üìÖ Add to GCal
                    </a>
                    <button onclick="regenerateDocuments()" class="btn btn-secondary" id="regenerateBtn">
                        üîÑ Regen
                    </button>
            </div>
        </div>
    </div>
    
    <!-- Hero Card with Metadata -->
    <div class="app-header-card">
        <div style="display: flex; justify-content: center; gap: 16px; margin-bottom: 20px;">
            <span id="statusPill" class="status-pill tag tag-blue">Ready to Contact</span>
            <span class="status-pill tag tag-green">85% Match</span>
        </div>
        
            <div style="margin: 20px 0;">
                <!-- All 8 Badges -->
                <div style="padding: 16px; background: white; border: 1px solid #e5e7eb; border-radius: 8px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; cursor: pointer;" onclick="toggleBadgeSection()">
                        <h3 style="margin: 0; font-size: 14px; font-weight: 600; color: #1f2937;">Networking Rewards (10 pts)</h3>
                        <svg id="badge-toggle-icon" width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: #6b7280; transition: transform 0.3s ease;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </div>
                    <div id="badge-grid-content" style="display: flex; gap: 8px; flex-wrap: wrap; max-height: 300px; overflow-y: auto;">
                        
                    <div style="padding: 10px; min-width: 160px; border: 2px solid #3b82f6; border-radius: 8px; background: white; cursor: help;" title="Contact reached &quot;Sent LinkedIn Connection&quot; status | Badges tracking: Deep Research Complete (Steps 1.1-1.3). Specific personalization hook is defined. | Trigger: Sent LinkedIn Connection">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 16px; color: #3b82f6; font-weight: bold;">‚úì</span>
                            <span style="font-size: 13px; font-weight: 600; color: #1f2937; flex: 1;">Deep Diver</span>
                            <span style="font-size: 13px; font-weight: 700; color: #10b981; white-space: nowrap;">+10</span>
                        </div>
                    </div>
                
                    <div style="padding: 10px; min-width: 160px; border: 2px solid #d1d5db; border-radius: 8px; background: white; cursor: help;" title="Contact reached &quot;Sent Email&quot; status | Badges tracking: Personalized LinkedIn Message Sent (Step 2.1). Awaiting connection acceptance or response. | Trigger: Sent Email">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 16px; color: #9ca3af; font-weight: bold;">‚óã</span>
                            <span style="font-size: 13px; font-weight: 600; color: #1f2937; flex: 1;">Profile Magnet</span>
                            <span style="font-size: 13px; font-weight: 700; color: #9ca3af; white-space: nowrap;">+3</span>
                        </div>
                    </div>
                
                    <div style="padding: 10px; min-width: 160px; border: 2px solid #d1d5db; border-radius: 8px; background: white; cursor: help;" title="Contact reached &quot;Connection Accepted&quot; status | Badges tracking: Contact Viewed Profile (2.3) OR Connection Accepted (2.4) OR Email Reply Received (3.4). Any positive sign of engagement. | Trigger: Connection Accepted">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 16px; color: #9ca3af; font-weight: bold;">‚óã</span>
                            <span style="font-size: 13px; font-weight: 600; color: #1f2937; flex: 1;">Qualified Lead</span>
                            <span style="font-size: 13px; font-weight: 700; color: #9ca3af; white-space: nowrap;">+15</span>
                        </div>
                    </div>
                
                    <div style="padding: 10px; min-width: 160px; border: 2px solid #d1d5db; border-radius: 8px; background: white; cursor: help;" title="Contact reached &quot;In Conversation&quot; status | Badges tracking: Value-Driven Email Sent (3.3) and Contact is Actively Responding. You are exchanging messages to set a meeting. | Trigger: In Conversation">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 16px; color: #9ca3af; font-weight: bold;">‚óã</span>
                            <span style="font-size: 13px; font-weight: 600; color: #1f2937; flex: 1;">Conversation Starter</span>
                            <span style="font-size: 13px; font-weight: 700; color: #9ca3af; white-space: nowrap;">+20</span>
                        </div>
                    </div>
                
                    <div style="padding: 10px; min-width: 160px; border: 2px solid #d1d5db; border-radius: 8px; background: white; cursor: help;" title="Contact reached &quot;Meeting Scheduled&quot; status | Badges tracking: Call/Meeting Confirmed on Calendar (Step 8). A specific date/time is set. | Trigger: Meeting Scheduled">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 16px; color: #9ca3af; font-weight: bold;">‚óã</span>
                            <span style="font-size: 13px; font-weight: 600; color: #1f2937; flex: 1;">Scheduler Master</span>
                            <span style="font-size: 13px; font-weight: 700; color: #9ca3af; white-space: nowrap;">+30</span>
                        </div>
                    </div>
                
                    <div style="padding: 10px; min-width: 160px; border: 2px solid #d1d5db; border-radius: 8px; background: white; cursor: help;" title="Contact reached &quot;Meeting Complete&quot; status | Badges tracking: Meeting Occurred and Debrief is Done (Step 9). Informational interview or call is complete. | Trigger: Meeting Complete">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 16px; color: #9ca3af; font-weight: bold;">‚óã</span>
                            <span style="font-size: 13px; font-weight: 600; color: #1f2937; flex: 1;">Rapport Builder</span>
                            <span style="font-size: 13px; font-weight: 700; color: #9ca3af; white-space: nowrap;">+50</span>
                        </div>
                    </div>
                
                    <div style="padding: 10px; min-width: 160px; border: 2px solid #d1d5db; border-radius: 8px; background: white; cursor: help;" title="Contact reached &quot;Strong Connection&quot; status | Badges tracking: Next Check-in Scheduled (Step 4.1) or Maintenance Check-in Sent (Step 4.2). Relationship is established and active. | Trigger: Strong Connection">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 16px; color: #9ca3af; font-weight: bold;">‚óã</span>
                            <span style="font-size: 13px; font-weight: 600; color: #1f2937; flex: 1;">Relationship Manager</span>
                            <span style="font-size: 13px; font-weight: 700; color: #9ca3af; white-space: nowrap;">+2</span>
                        </div>
                    </div>
                
                    <div style="padding: 10px; min-width: 160px; border: 2px solid #d1d5db; border-radius: 8px; background: white; cursor: help;" title="Contact reached &quot;Referral Partner&quot; status | Badges tracking: Contact Provides Referral/Opportunity OR Explicitly Offers Advocacy. Confirmed as a high-value relationship. | Trigger: Referral Partner">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 16px; color: #9ca3af; font-weight: bold;">‚óã</span>
                            <span style="font-size: 13px; font-weight: 600; color: #1f2937; flex: 1;">Super Connector</span>
                            <span style="font-size: 13px; font-weight: 700; color: #9ca3af; white-space: nowrap;">+100</span>
                        </div>
                    </div>
                
                    </div>
                    <script>
                        let badgeSectionExpanded = true;
                        function toggleBadgeSection() {
                            const content = document.getElementById('badge-grid-content');
                            const icon = document.getElementById('badge-toggle-icon');
                            if (!badgeSectionExpanded) {
                                content.style.display = 'flex';
                                icon.style.transform = 'rotate(0deg)';
                                badgeSectionExpanded = true;
                            } else {
                                content.style.display = 'none';
                                icon.style.transform = 'rotate(180deg)';
                                badgeSectionExpanded = false;
                            }
                        }
                    </script>
                </div>
            </div>
            
        
                <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #e5e7eb;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; cursor: pointer;" onclick="toggleCompanyPositions()">
                        <h3 style="font-size: 14px; font-weight: 600; color: #6b7280; margin: 0; text-transform: uppercase; letter-spacing: 0.5px;">Positions at Zocdoc</h3>
                        <svg id="positions-toggle-icon" width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: #6b7280; transition: transform 0.3s ease;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </div>
                    <div id="company-positions-content" style="max-height: 200px; overflow-y: auto;">
                        
                    <div style="display: flex; align-items: center; gap: 8px; padding: 6px 0; border-bottom: 1px solid #e5e7eb;">
                        <span style="flex: 1; font-size: 14px; font-weight: 500; color: #1f2937;">Senior Manager, Product Analytics</span>
                        <span class="status-pill tag tag-blue">Company Response</span>
                    </div>
                
                    <div style="display: flex; align-items: center; gap: 8px; padding: 6px 0; border-bottom: 1px solid #e5e7eb;">
                        <span style="flex: 1; font-size: 14px; font-weight: 500; color: #1f2937;">Lead Product Analyst</span>
                        <span class="status-pill tag tag-gray">Pending</span>
                    </div>
                
                    </div>
                    <script>
                        let companyPositionsExpanded = true;
                        function toggleCompanyPositions() {
                            const content = document.getElementById('company-positions-content');
                            const icon = document.getElementById('positions-toggle-icon');
                            if (!companyPositionsExpanded) {
                                content.style.display = 'block';
                                icon.style.transform = 'rotate(0deg)';
                                companyPositionsExpanded = true;
                            } else {
                                content.style.display = 'none';
                                icon.style.transform = 'rotate(180deg)';
                                companyPositionsExpanded = false;
                            }
                        }
                    </script>
                </div>
            
        <div class="app-meta">
            <div class="meta-item">
                <span>üìç</span>
                <span>N/A</span>
            </div>
            <div class="meta-item">
                <span>üìÖ</span>
                <span><strong>Connected:</strong> Dec 12, 2025 04:56 PM EST</span>
            </div>
            <div class="meta-item">
                <span>üîÑ</span>
                <span id="statusUpdated"><strong>Updated:</strong> Dec 14, 2025 09:03 PM EST</span>
            </div>
            <div class="meta-item">
                <span>üìä</span>
                <span><strong>Status:</strong> <span id="statusDisplay">Ready to Contact</span></span>
            </div>
            <div class="meta-item"><span>üîó</span><a href="https://www.linkedin.com/in/fentonmeaghan/" target="_blank" style="color: #3b82f6; text-decoration: none;">LinkedIn Profile</a></div>
            <div class="meta-item" id="emailMetaItem">
                <span>üìß</span>
                <span id="emailDisplay" style="cursor: pointer; text-decoration: underline; text-decoration-style: dotted;" onclick="editEmailInline()" title="Click to edit">leacock.kervin@gmail.com</span>
                <input type="email" id="emailInput" value="leacock.kervin@gmail.com" style="display: none; padding: 4px 8px; border: 1px solid #3b82f6; border-radius: 4px; font-size: 14px; width: 200px;" onblur="saveEmailInline()" onkeypress="if(event.key==='Enter') saveEmailInline()">
            </div>
        </div>
    </div>
    
    <div class="tabs">
        <div class="tab active" onclick="switchTab('summary')">Summary</div>
        <div class="tab" onclick="switchTab('raw')">Raw Entry</div>
        <div class="tab" onclick="switchTab('skills')">Skills</div>
        <div class="tab" onclick="switchTab('research')">Research</div>
        <div class="tab" onclick="switchTab('messages')">Messages</div>
        <div class="tab" onclick="switchTab('updates')">Updates & Notes</div>
        <div class="tab" onclick="switchTab('update-contact')">Update Contact</div>
    </div>
    
        <div class="content">
        <!-- Summary Tab -->
        <div id="summary" class="tab-content active">
            <!-- Match Analysis Section -->
            <div class="section">
                <div class="section-header">
                    <h2>Match Analysis</h2>
                </div>
                <div class="section-content">
                <div class="analysis-section">
                    <div class="analysis-text">MATCH SCORE: 85

SKILL OVERLAP: High
Shared Skills:
- Python
- SQL
- AWS Lake Formation
- Data Analytics
...

CAREER SIMILARITY: Medium
Common Elements:
- Financial services experience in roles such as Vice-President Business Intelligence and Division Director of Business Performance
- Experience with data analytics, business intelligence, and product management

COMMON INTERESTS:
- Fintech industry development
- Payments and reconciliation processes
- Data-driven decision-making

NETWORKING VALUE: High
Opportunities:
- Collaboration on data analytics projects in fintech
- Learning from Meaghan's experience as Director of Recruiting at Zocdoc
- Potential referral or introduction to other professionals in the field

CONVERSATION TOPICS:
1. "What are some key trends you've seen in fintech, and how do you think they'll impact data analytics?"
2. "How do you approach product management in a rapidly changing industry like fintech?"
3. "Can you share an example of a successful data-driven decision-making project you've led or been involved with?"

SYNTHESIS:
Meaghan Fenton's profile suggests that she is a leader in the fintech industry, with expertise in recruiting and talent development. Kervin's background in data analytics, business intelligence, and product management makes him an ideal connection for discussing trends in fintech and potential collaboration opportunities. By highlighting shared interests in fintech and data-driven decision-making, Kervin can establish a strong foundation for the conversation and demonstrate his value as a professional networker.</div>
                </div>
                </div>
            </div>
            
            <!-- Key Strengths & Talking Points -->
            <div class="section">
                <div class="section-header">
                    <h2>Key Strengths & Talking Points</h2>
                </div>
                <div class="section-content">
                <div style="background: #f0fdf4; border-left: 4px solid #10b981; border-radius: 8px; padding: 20px;">
                    <ul style="margin: 0; padding-left: 20px; color: #166534; line-height: 1.8;">
    <li>CAREER SIMILARITY: Medium</li>
    <li>Financial services experience in roles such as Vice-President Business Intelligence and Division Director of Business Performance</li>
    <li>Meaghan Fenton's profile suggests that she is a leader in the fintech industry, with expertise in recruiting and talent development. Kervin's background in data analytics, business intelligence, and product management makes him an ideal connection for discussing trends in fintech and potential collaboration opportunities. By highlighting shared interests in fintech and data-driven decision-making, Kervin can establish a strong foundation for the conversation and demonstrate his value as a professional networker.</li>
</ul>
                </div>
                </div>
            </div>
        </div>
        
        <!-- Raw Entry Tab -->
        <div id="raw" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <h2>Raw Profile Details</h2>
                </div>
                <div class="section-content">
                <pre>Meaghan Fenton 2nd degree connection¬∑ 2nd
Director of Recruiting at Zocdoc - we're hiring!</pre>
                </div>
            </div>
        </div>
        
        <!-- Skills Tab -->
        <div id="skills" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <h2>Skills Analysis</h2>
                </div>
                <div class="section-content">
                <p style="color: #6b7280; margin-bottom: 16px;">
                    Comparison of your skills with Meaghan Fenton's profile.
                </p>
                
                <h3>Shared Skills</h3>
                <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 24px;">
                    <span style="padding: 6px 12px; background: #d1fae5; color: #065f46; border-radius: 6px; font-size: 13px; font-weight: 500;">Python</span><span style="padding: 6px 12px; background: #d1fae5; color: #065f46; border-radius: 6px; font-size: 13px; font-weight: 500;">SQL</span><span style="padding: 6px 12px; background: #d1fae5; color: #065f46; border-radius: 6px; font-size: 13px; font-weight: 500;">AWS Lake Formation</span><span style="padding: 6px 12px; background: #d1fae5; color: #065f46; border-radius: 6px; font-size: 13px; font-weight: 500;">Data Analytics</span>
                </div>
                
                <h3>Your Unique Skills</h3>
                <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 24px;">
                    <span style="padding: 6px 12px; background: #dbeafe; color: #1e40af; border-radius: 6px; font-size: 13px;">Your unique skills will be highlighted in future updates</span>
                </div>
                
                <h3>Their Skills (Learning Opportunities)</h3>
                <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                    <span style="padding: 6px 12px; background: #fef3c7; color: #92400e; border-radius: 6px; font-size: 13px;">Their unique skills will be highlighted in future updates</span>
                </div>
                </div>
            </div>
        </div>
        
        <!-- Research Tab -->
        <div id="research" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <h2>AI-Generated Research & Background</h2>
                </div>
                <div class="section-content">
                <div style="background: #eff6ff; border: 1px solid #3b82f6; border-radius: 8px; padding: 20px; margin-bottom: 24px;">
                    <p style="color: #1e40af; font-size: 14px; margin-bottom: 12px;">
                        <strong>Note:</strong> This research was automatically generated from the LinkedIn profile data and available information.
                    </p>
                </div>
                <div class="analysis-text" style="white-space: pre-wrap; line-height: 1.8;">
Here are the research notes:

## COMPANY BACKGROUND: Zocdoc

Zocdoc appears to be a healthcare technology company that connects patients with healthcare professionals for appointments and consultations. The profile does not provide specific size indicators or mission/values statements, but it mentions that they are "hiring" which suggests that they may be growing.

## RECENT COMPANY NEWS & UPDATES

Not available in profile data.

## Meaghan Fenton'S RECENT ACTIVITY

Meaghan Fenton's recent activity is limited to her title and company information. There are no posts, articles, or professional activities mentioned on her LinkedIn profile.

## MUTUAL CONNECTIONS & NETWORKS

Not available in profile data.

## KEY TALKING POINTS

Based on Meaghan Fenton's profile, some potential talking points could be:

1. Recruitment strategies: As the Director of Recruiting at Zocdoc, Meaghan may have insights into effective recruitment methods and talent acquisition techniques.
2. Healthcare technology trends: Given her company's focus on healthcare technology, discussing current trends and innovations in this space might be a valuable conversation starter.
3. Professional development opportunities: With her experience in recruiting for Zocdoc, Meaghan could share information about training programs, mentorship initiatives, or other professional growth opportunities within the company.

Note that these talking points are based solely on the provided profile data and may not reflect Meaghan's actual areas of expertise or interest.
                </div>
                </div>
            </div>
        </div>
        
        <!-- Update Contact Tab -->
        <div id="update-contact" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <h2>Update Contact</h2>
                </div>
                <div class="section-content">
                    <form id="contactDetailsForm" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        <div class="form-group" style="margin-bottom: 0;">
                            <label for="contactEmail" style="font-weight: 600; color: #374151; margin-bottom: 8px; display: block;">Email Address</label>
                            <input type="email" id="contactEmail" name="email" value="leacock.kervin@gmail.com" placeholder="email@example.com" style="width: 100%; padding: 10px 14px; font-size: 14px; border: 1px solid #d1d5db; border-radius: 8px; transition: all 0.15s ease;">
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <label for="contactLocation" style="font-weight: 600; color: #374151; margin-bottom: 8px; display: block;">Location</label>
                            <input type="text" id="contactLocation" name="location" value="" placeholder="City, State/Country" style="width: 100%; padding: 10px 14px; font-size: 14px; border: 1px solid #d1d5db; border-radius: 8px; transition: all 0.15s ease;">
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <label for="contactJobTitle" style="font-weight: 600; color: #374151; margin-bottom: 8px; display: block;">Job Title</label>
                            <input type="text" id="contactJobTitle" name="job_title" value="Director of Recruiting" placeholder="Job Title" style="width: 100%; padding: 10px 14px; font-size: 14px; border: 1px solid #d1d5db; border-radius: 8px; transition: all 0.15s ease;">
                        </div>
                    </form>
                    <button onclick="saveContactDetails()" class="btn btn-primary" style="margin-top: 16px;" id="saveDetailsBtn">Save Contact Details</button>
                    <div id="detailsAlert" style="margin-top: 12px; display: none; padding: 12px; border-radius: 6px; font-size: 14px;"></div>
                </div>
            </div>
        </div>
        
        <!-- Messages Tab -->
        <div id="messages" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <h2>Networking Messages</h2>
                </div>
                <div class="section-content">
                <div class="message-box">
                    <h3>
                        <span>1. Initial Connection Request (LinkedIn)</span>
                        <button class="copy-btn" onclick="copyMessage('connection')">Copy</button>
                    </h3>
                    <div id="connection-message">Data/BI/Analytics Leader, with experience in FInancial services from Self Financiat to BoNY and RBC. I applied for Director of Recruiting (XX% match) on your site. Passionate about credit building and enabling financial success at Zocdoc. Eager to discuss my experience!</div>
                    <div class="char-count">270 characters</div>
                </div>
                
                <div class="message-box">
                    <h3>
                        <span>2. Meeting Invitation</span>
                        <button class="copy-btn" onclick="copyMessage('meeting')">Copy</button>
                    </h3>
                    <div id="meeting-message">Hi Meaghan I am a Product/ Data/ Strategy Leader with 18+ years driving strategy, data analysis, and unprecedented growth. Applied to the Director of Recruiting. Let's connect.</div>
                </div>
                
                <div class="message-box">
                    <h3>
                        <span>3. Thank You Message</span>
                        <button class="copy-btn" onclick="copyMessage('thankyou')">Copy</button>
                    </h3>
                    <div id="thankyou-message">Hello Meaghan! Your banner caught my eye.
I'm Kervin, a Data Product Leader, and I applied for the Director of Recruiting role at Zocdoc. I emailed you my resume & cover for reference. My experience is a great match. I hope to connect!
Cheers</div>
                </div>
                
                <div class="message-box">
                    <h3>
                        <span>4. Consulting Services Offer</span>
                        <button class="copy-btn" onclick="copyMessage('consulting')">Copy</button>
                    </h3>
                    <div id="consulting-message">I am a hands on experienced Data Analytics and BI leader. I turn disparate data into strategic solutions and automation. Proficient in BI, Cloud, SQL, and Data tools. Always open to high-impact roles in [Target Industry]</div>
                </div>
                </div>
            </div>
        </div>
        
        <!-- Updates & Notes Tab -->
        <div id="updates" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <h2>Update Status</h2>
                </div>
                <div class="section-content">
                
                <div id="updateAlert" class="alert"></div>
                
                <form id="statusUpdateForm">
                    <div class="form-group">
                        <label for="status">Select Status</label>
                        <select id="status" name="status" required>
                            <option value="">-- Select Status --</option>
                            <optgroup label="Prospecting">
                                <option value="Found Contact" >Found Contact</option>
                                <option value="Sent LinkedIn Connection" >Sent LinkedIn Connection</option>
                            </optgroup>
                            <optgroup label="Outreach">
                                <option value="Sent Email" >Sent Email</option>
                                <option value="Connection Accepted" >Connection Accepted</option>
                                <option value="Cold/Inactive" >Cold/Inactive</option>
                            </optgroup>
                            <optgroup label="Engagement">
                                <option value="In Conversation" >In Conversation</option>
                                <option value="Meeting Scheduled" >Meeting Scheduled</option>
                                <option value="Meeting Complete" >Meeting Complete</option>
                            </optgroup>
                            <optgroup label="Nurture">
                                <option value="Strong Connection" >Strong Connection</option>
                                <option value="Referral Partner" >Referral Partner</option>
                                <option value="Dormant" >Dormant</option>
                            </optgroup>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="notes" style="display: flex; justify-content: space-between; align-items: center;">
                            <span>Notes</span>
                            <button type="button" onclick="copyEditorContent()" class="copy-btn" style="padding: 6px 12px; font-size: 12px;">Copy Notes</button>
                        </label>
                        <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                            <button type="button" class="template-btn" onclick="insertTemplate('connection')">Connection Request</button>
                            <button type="button" class="template-btn" onclick="insertTemplate('followup')">Follow-up</button>
                            <button type="button" class="template-btn" onclick="insertTemplate('meeting')">Meeting Notes</button>
                            <button type="button" class="template-btn" onclick="insertTemplate('thankyou')">Thank You</button>
                        </div>
                        <div id="editor" style="background: white; min-height: 150px;"></div>
                        <input type="hidden" id="notes" name="notes">
                        
                        <!-- Message Templates Dropdown -->
                        <div style="margin-top: 16px; display: flex; gap: 12px; align-items: center;">
                            <label for="messageTemplate" style="font-weight: 600; color: #1f2937; font-size: 14px;">Message Templates:</label>
                            <select id="messageTemplate" onchange="loadMessageIntoEditor()" style="padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px; min-width: 250px; flex: 1;">
                                <option value="">-- Select a Message Template --</option>
                                <option value="connection">1. Connection Request</option>
                                <option value="meeting">2. Meeting Invitation</option>
                                <option value="thankyou">3. Thank You Message</option>
                                <option value="consulting">4. Consulting Services Offer</option>
                            </select>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary" id="updateBtn">Update Status</button>
                </form>
                
                <div class="timeline" id="timeline">
                    <h2>Status History</h2>
                    <div id="timelineContent">
                        <p style="color: #6b7280;">Loading timeline...</p>
                    </div>
                </div>
                </div>
            </div>
        </div>
        
        <!-- Update Contact Tab -->
        <div id="update-contact" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <h2>Update Contact</h2>
                </div>
                <div class="section-content">
                    <form id="contactDetailsForm" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        <div class="form-group" style="margin-bottom: 0;">
                            <label for="contactEmail" style="font-weight: 600; color: #374151; margin-bottom: 8px; display: block;">Email Address</label>
                            <input type="email" id="contactEmail" name="email" value="leacock.kervin@gmail.com" placeholder="email@example.com" style="width: 100%; padding: 10px 14px; font-size: 14px; border: 1px solid #d1d5db; border-radius: 8px; transition: all 0.15s ease;">
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <label for="contactLocation" style="font-weight: 600; color: #374151; margin-bottom: 8px; display: block;">Location</label>
                            <input type="text" id="contactLocation" name="location" value="" placeholder="City, State/Country" style="width: 100%; padding: 10px 14px; font-size: 14px; border: 1px solid #d1d5db; border-radius: 8px; transition: all 0.15s ease;">
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <label for="contactJobTitle" style="font-weight: 600; color: #374151; margin-bottom: 8px; display: block;">Job Title</label>
                            <input type="text" id="contactJobTitle" name="job_title" value="Director of Recruiting" placeholder="Job Title" style="width: 100%; padding: 10px 14px; font-size: 14px; border: 1px solid #d1d5db; border-radius: 8px; transition: all 0.15s ease;">
                        </div>
                    </form>
                    <button onclick="saveContactDetails()" class="btn btn-primary" style="margin-top: 16px;" id="saveDetailsBtn">Save Contact Details</button>
                    <div id="detailsAlert" style="margin-top: 12px; display: none; padding: 12px; border-radius: 6px; font-size: 14px;"></div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const contactId = '20251212165622-Meaghan Fenton-Zocdoc';
        let quill;
        
        // Load timeline on page load
        document.addEventListener('DOMContentLoaded', () => {
            loadTimeline();
            initializeEditor();
        });
        
        // Initialize Quill Rich Text Editor
        function initializeEditor() {
            quill = new Quill('#editor', {
                theme: 'snow',
                modules: {
                    toolbar: [
                        ['bold', 'italic', 'underline', 'strike'],
                        [{ 'list': 'ordered' }, { 'list': 'bullet' }],
                        ['link'],
                        ['clean']
                    ]
                },
                placeholder: 'Add notes about this status update...'
            });
        }
        
        // Template insertion
        function insertTemplate(type) {
            if (!quill) return;
            
            const templates = {
                'connection': '<p><strong>Connection Request Sent</strong></p><p>Sent LinkedIn connection request with personalized message.</p><p>Next step: Follow up in 5-7 business days if no response.</p>',
                'followup': '<p><strong>Follow-up</strong></p><p>Following up on previous outreach.</p><p>Key points discussed:</p><ul><li>Point 1</li><li>Point 2</li></ul>',
                'meeting': '<p><strong>Meeting Notes</strong></p><p>Date: [Date]</p><p>Duration: [Duration]</p><p>Discussion Topics:</p><ul><li>Topic 1</li><li>Topic 2</li></ul><p>Action Items:</p><ul><li>Action 1</li><li>Action 2</li></ul><p>Next Steps: [Next Steps]</p>',
                'thankyou': '<p><strong>Thank You Note Sent</strong></p><p>Thanked Meaghan Fenton for their time and insights.</p><p>Key takeaways:</p><ul><li>Takeaway 1</li><li>Takeaway 2</li></ul><p>Next step: [Next Step]</p>'
            };
            
            const template = templates[type] || '';
            quill.root.innerHTML = template;
        }

        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (!section) {
                return;
            }
            section.classList.toggle('collapsed');
        }
        
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Mark selected tab as active
            event.target.classList.add('active');
            
            // Load timeline if updates tab is selected
            if (tabName === 'updates') {
                loadTimeline();
            }
        }
        
        // Load message template into editor
        function loadMessageIntoEditor() {
            if (!quill) return;
            
            const select = document.getElementById('messageTemplate');
            const selectedValue = select.value;
            
            if (!selectedValue) {
                return;
            }
            
            // Get message from Messages tab
            const messageElement = document.getElementById(selectedValue + '-message');
            if (!messageElement) {
                console.error('Message element not found:', selectedValue);
                return;
            }
            
            const text = messageElement.textContent.trim();
            
            // Convert plain text to HTML paragraphs for Quill
            const paragraphs = text.split('\n\n').filter(p => p.trim());
            const htmlContent = paragraphs.map(p => `<p>${p.trim().replace(/\n/g, '<br>')}</p>`).join('');
            
            // Set the editor content
            quill.root.innerHTML = htmlContent || `<p>${text}</p>`;
        }
        
        // Copy editor content to clipboard
        function copyEditorContent() {
            if (!quill) {
                alert('Editor not initialized');
                return;
            }
            
            // Get plain text from Quill editor
            const text = quill.getText();
            
            if (!text.trim()) {
                alert('Notes box is empty');
                return;
            }
            
            navigator.clipboard.writeText(text).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                btn.style.background = '#10b981';
                btn.style.color = 'white';
                
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '';
                    btn.style.color = '';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy:', err);
                alert('Failed to copy notes to clipboard');
            });
        }
        
        function copyMessage(messageType) {
            const messageElement = document.getElementById(messageType + '-message');
            const text = messageElement.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            });
        }
        
        // Handle status update form submission
        document.getElementById('statusUpdateForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const updateBtn = document.getElementById('updateBtn');
            const updateAlert = document.getElementById('updateAlert');
            const status = document.getElementById('status').value;
            
            // Get HTML content from Quill editor
            const notes = quill.root.innerHTML;
            
            // Disable button
            updateBtn.disabled = true;
            updateBtn.textContent = 'Updating...';
            
            // Hide previous alerts
            updateAlert.classList.remove('show', 'success', 'error');
            
            try {
                const response = await fetch(`/api/networking/contacts/${contactId}/status`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ status, notes })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    // Show success message
                    updateAlert.textContent = `Status updated to "${status}"`;
                    updateAlert.classList.add('show', 'success');
                    
                    // Update status displays immediately
                    const statusPill = document.getElementById('statusPill');
                    const statusDisplay = document.getElementById('statusDisplay');
                    const currentStatusDisplay = document.getElementById('currentStatusDisplay');
                    const statusUpdated = document.getElementById('statusUpdated');
                    
                    if (statusPill) statusPill.textContent = status;
                    if (statusDisplay) statusDisplay.textContent = status;
                    if (currentStatusDisplay) currentStatusDisplay.textContent = status;
                    if (statusUpdated) {
                        const now = new Date();
                        const dateStr = now.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
                        const timeStr = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
                        statusUpdated.innerHTML = `<strong>Updated:</strong> ${dateStr} ${timeStr}`;
                    }
                    
                    // Update dropdown selection
                    const statusSelect = document.getElementById('status');
                    if (statusSelect) {
                        statusSelect.value = status;
                    }
                    
                    // Clear editor
                    quill.root.innerHTML = '';
                    
                    // Reload timeline
                    await loadTimeline();
                    
                    // Update page metadata if needed - wait longer to ensure save completes
                    setTimeout(() => {
                        location.reload();
                    }, 3000);
                } else {
                    // Show error message
                    updateAlert.textContent = `Error: ${data.error}`;
                    updateAlert.classList.add('show', 'error');
                }
            } catch (error) {
                console.error('Error updating status:', error);
                updateAlert.textContent = `Error: ${error.message}`;
                updateAlert.classList.add('show', 'error');
            } finally {
                // Re-enable button
                updateBtn.disabled = false;
                updateBtn.textContent = 'Update Status';
            }
        });
        
        async function loadTimeline() {
            const timelineContent = document.getElementById('timelineContent');
            
            try {
                const response = await fetch(`/api/networking/contacts/${contactId}`);
                const data = await response.json();
                
                if (data.success && data.contact.updates) {
                    const updates = data.contact.updates;
                    
                    if (updates.length === 0) {
                        timelineContent.innerHTML = '<p style="color: #6b7280;">No status updates yet.</p>';
                        return;
                    }
                    
                    // Render timeline items (already sorted newest first from API)
                    timelineContent.innerHTML = updates.map((update, index) => {
                        const isLatest = index === 0;
                        const timestamp = update.timestamp;
                        const date = new Date(
                            parseInt(timestamp.substring(0, 4)),
                            parseInt(timestamp.substring(4, 6)) - 1,
                            parseInt(timestamp.substring(6, 8)),
                            parseInt(timestamp.substring(8, 10)),
                            parseInt(timestamp.substring(10, 12)),
                            parseInt(timestamp.substring(12, 14))
                        );
                        
                        const dateStr = date.toLocaleDateString('en-US', { 
                            month: 'long', 
                            day: 'numeric', 
                            year: 'numeric',
                            hour: 'numeric',
                            minute: '2-digit'
                        }) + ' EST';
                        
                        return `
                            <div class="timeline-item ${isLatest ? 'latest' : ''}">
                                <div class="timeline-header">
                                    <span class="timeline-status">${update.status}</span>
                                    <span class="timeline-date">${dateStr}</span>
                                </div>
                                ${update.notes ? `
                                    <div class="timeline-notes-label">Notes:</div>
                                    <div class="timeline-notes">${update.notes}</div>
                                ` : ''}
                            </div>
                        `;
                    }).join('');
                } else {
                    timelineContent.innerHTML = '<p style="color: #6b7280;">Error loading timeline.</p>';
                }
            } catch (error) {
                console.error('Error loading timeline:', error);
                timelineContent.innerHTML = '<p style="color: #ef4444;">Error loading timeline.</p>';
            }
        }
        
        async function regenerateDocuments() {
            const regenerateBtn = document.getElementById('regenerateBtn');
            
            if (!confirm('Regenerate all AI analysis and messages? This will take 5-6 minutes.')) {
                return;
            }
            
            regenerateBtn.disabled = true;
            regenerateBtn.textContent = 'üîÑ Regenerating...';
            
            try {
                const response = await fetch(`/api/networking/contacts/${contactId}/regenerate`, {
                    method: 'POST'
                });
                
                const data = await response.json();
                
                if (data.success) {
                    alert('Documents regenerated successfully! Reloading page...');
                    location.reload();
                } else {
                    alert(`Error: ${data.error}`);
                    regenerateBtn.disabled = false;
                    regenerateBtn.textContent = 'üîÑ Regen';
                }
            } catch (error) {
                alert(`Error: ${error.message}`);
                regenerateBtn.disabled = false;
                regenerateBtn.textContent = 'üîÑ Regen';
            }
        }
        
        // Inline email editing in hero card
        function editEmailInline() {
            const emailDisplay = document.getElementById('emailDisplay');
            const emailInput = document.getElementById('emailInput');
            
            if (emailDisplay && emailInput) {
                emailDisplay.style.display = 'none';
                emailInput.style.display = 'inline-block';
                emailInput.focus();
                emailInput.select();
            }
        }
        
        async function saveEmailInline() {
            const emailDisplay = document.getElementById('emailDisplay');
            const emailInput = document.getElementById('emailInput');
            
            if (!emailInput) return;
            
            const newEmail = emailInput.value.trim();
            
            // Hide input, show display
            emailInput.style.display = 'none';
            
            try {
                const response = await fetch(`/api/networking/contacts/${contactId}/details`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email: newEmail || null })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    // Update display
                    if (emailDisplay) {
                        if (newEmail) {
                            emailDisplay.textContent = newEmail;
                            emailDisplay.style.color = '';
                            emailDisplay.style.textDecoration = 'underline';
                            emailDisplay.style.textDecorationStyle = 'dotted';
                            emailDisplay.title = 'Click to edit';
                        } else {
                            emailDisplay.textContent = 'Add Email';
                            emailDisplay.style.color = '#3b82f6';
                            emailDisplay.style.textDecoration = 'underline';
                            emailDisplay.style.textDecorationStyle = 'solid';
                            emailDisplay.title = '';
                        }
                        emailDisplay.style.display = 'inline';
                    }
                    // Update input value
                    emailInput.value = newEmail;
                    
                    // Update contact details form
                    const contactEmailField = document.getElementById('contactEmail');
                    if (contactEmailField) {
                        contactEmailField.value = newEmail;
                    }
                    
                    // Show success feedback
                    showInlineSuccess(emailDisplay);
                    
                    // Reload page after short delay to sync all fields
                    setTimeout(() => {
                        location.reload();
                    }, 1000);
                } else {
                    // Show error
                    alert('Failed to update email: ' + (data.error || 'Unknown error'));
                    if (emailDisplay) emailDisplay.style.display = 'inline';
                }
            } catch (error) {
                console.error('Error updating email:', error);
                alert('Error updating email: ' + error.message);
                if (emailDisplay) emailDisplay.style.display = 'inline';
            }
        }
        
        function showInlineSuccess(element) {
            if (!element) return;
            const originalBg = element.style.backgroundColor;
            element.style.backgroundColor = '#d1fae5';
            setTimeout(() => {
                element.style.backgroundColor = originalBg;
            }, 2000);
        }
        
        // Save contact details from Summary tab form
        async function saveContactDetails() {
            const btn = document.getElementById('saveDetailsBtn');
            const alert = document.getElementById('detailsAlert');
            const email = document.getElementById('contactEmail').value.trim() || null;
            const location = document.getElementById('contactLocation').value.trim() || null;
            const jobTitle = document.getElementById('contactJobTitle').value.trim() || null;
            
            btn.disabled = true;
            btn.textContent = 'Saving...';
            alert.style.display = 'none';
            
            try {
                const response = await fetch(`/api/networking/contacts/${contactId}/details`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, location, job_title: jobTitle })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    alert.style.display = 'block';
                    alert.style.background = '#d1fae5';
                    alert.style.color = '#065f46';
                    alert.style.border = '1px solid #10b981';
                    alert.textContent = 'Contact details updated successfully!';
                    
                    // Update hero card email display if email changed
                    const emailDisplay = document.getElementById('emailDisplay');
                    const emailInput = document.getElementById('emailInput');
                    if (emailDisplay && emailInput) {
                        if (email) {
                            emailDisplay.textContent = email;
                            emailDisplay.style.color = '';
                            emailDisplay.style.textDecoration = 'underline';
                            emailDisplay.style.textDecorationStyle = 'dotted';
                            emailDisplay.title = 'Click to edit';
                        } else {
                            emailDisplay.textContent = 'Add Email';
                            emailDisplay.style.color = '#3b82f6';
                            emailDisplay.style.textDecoration = 'underline';
                            emailDisplay.style.textDecorationStyle = 'solid';
                            emailDisplay.title = '';
                        }
                        emailInput.value = email || '';
                    }
                    
                    // Reload page after 1 second to update all fields
                    setTimeout(() => {
                        location.reload();
                    }, 1000);
                } else {
                    alert.style.display = 'block';
                    alert.style.background = '#fee2e2';
                    alert.style.color = '#991b1b';
                    alert.style.border = '1px solid #ef4444';
                    alert.textContent = 'Failed to update: ' + (data.error || 'Unknown error');
                }
            } catch (error) {
                console.error('Error updating contact details:', error);
                alert.style.display = 'block';
                alert.style.background = '#fee2e2';
                alert.style.color = '#991b1b';
                alert.style.border = '1px solid #ef4444';
                alert.textContent = 'Error updating contact details: ' + error.message;
            } finally {
                btn.disabled = false;
                btn.textContent = 'Save Contact Details';
            }
        }
        
    </script>
    <script src="/static/js/shared-menu.js"></script>
</body>
</html>